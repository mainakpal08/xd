var win=document.getElementById("window"),text=document.getElementById("no-js"),current_ver="1.0",context="def";function populate_help(){switch(help_dict={},context){case"def":help_dict.help="List of available commands along with their purpose",help_dict.about="Know about me. Get my CV",help_dict.blog="Browse through my blog posts",help_dict.contact="Know how to contact me",help_dict.config="Adjust configuration of this website",help_dict.tutorial="Run tutorial - A complete guide on using the website",help_dict.clear="Clear the window output";break;case"about":help_dict.education="His education so far",help_dict.experience="His past experiences",help_dict.interests="His interests",help_dict.cv="Download his CV",help_dict.clear="Clear the window output",help_dict.exit="Return to default prompt";break;case"config":help_dict.username="Change your username",help_dict.clear="Clear the window output",help_dict.exit="Return to default prompt"}return help_dict}function add_command_suggestion(n){n=void 0!==n?n:document.getElementById("cur-prompt");var e=document.getElementById("suggestions");if(null!=e&&void 0!==e){var t=e.parentNode;null!=t&&void 0!==e&&t.removeChild(e)}if(null!=n||void 0!==n){var o=document.createElement("table");o.className="cmd-sugges",o.id="suggestions";var r=document.createElement("tbody");o.appendChild(r);var a=document.createElement("tr");r.appendChild(a);var i=document.createElement("td");i.innerHTML="<strong>Commands: </strong>",a.appendChild(i),commands=populate_help();var s=document.createElement("td");for(var p in s.width="99%",a.appendChild(s),commands){var d=document.createElement("button");d.innerHTML=p,d.className="cmd-button",d.onclick=function(e){n.value=e.target.textContent,n.disabled=!0,n.id="",handle_input(e.target.textContent);var t=o.parentNode;null!=t&&void 0!==t&&t.removeChild(o),"name"!==context&&"continue"!==context&&add_prompt()},s.appendChild(d)}win.appendChild(o)}}function text_to_prompt(e,t,n){n=void 0!==n&&n,e.value=t,e.disabled=!0,e.id="";var o=document.getElementById("suggestions"),r=o.parentNode;null!=r&&void 0!==r&&r.removeChild(o),1==n&&handle_input(e.value)}function greet_user(e,t){populate_text(1==(t=void 0===t||t)?"Welcome back "+e:"Hi "+e,"h1"),setCookie("last_version",current_ver,365)}function run_tutorial(t){t=void 0!==t?t:null,populate_text("This tutorial will teach you how to use this website. <br> It should not take more than a couple of minutes."),context="continue",add_prompt(function(e){"y"==e.toLowerCase()?(context="def",inp=add_prompt(),text_to_prompt(inp,"",!1),populate_text("^ This is the default prompt. <br> The <strong>help</strong> command will show you a list of available commands along with their purpose. Try it. (Press Enter)","str-green"),inp=add_prompt(function(){populate_text("<br> Great!<br>","h2"),"y"==e.toLowerCase()?(populate_text("Some commands will just split out the output (e.g. <strong>help</strong> command) <br> Others might take you to an alternate prompt. <br> Try the <strong>about</strong> command. (Press Enter)","str-green"),inp=add_prompt(function(){populate_text("The <strong>help</strong> command will show a list of available commands under this prompt. Try it. (Press Enter)","str-green"),inp=add_prompt(function(){populate_text("<br> The <strong>exit</strong> command will take you up a level, to the default prompt. Try it. (Press Enter)","str-green"),inp=add_prompt(function(){text_to_prompt(inp,"",!1),populate_text("<br> The <strong>clear</strong> command will clear the output so far. Try it. (Press Enter)","str-green"),inp=add_prompt(function(){populate_text("I hope you will enjoy the experience. <br><br>Type <strong>help</strong> for a list of commands","str-green"),context="def",add_prompt(),null!=t&&t()}),inp.value="clear"}),inp.value="exit"}),inp.value="help"}),inp.value="about"):add_prompt()}),inp.value="help"):(populate_text("<br> Type <strong>help</strong> for a list of commands","str-green"),context="def",add_prompt(),null!=t&&t())})}function add_class(e,t){var n;return(n=""==e?[]:e.split(" ")).push(t),n.join(" ")}function make_p(e,t){t=void 0!==t?t:"";var n=document.createElement("p");return""!=e&&(n.innerHTML=e),""!=t&&(n.className=t),n}function make_a(e,t,n){var o=make_p("",n=add_class(n=void 0!==n?n:"","link")),r=document.createElement("a");return r.innerHTML=e&&""!=e?e:t,r.href=t,o.appendChild(r),o}function populate(e,t,n){if(n=void 0!==n?n:"",0!=t)for(var o=e.childNodes,r=0;r<o.length;++r){var a=o[r],i=a.tagName;i&&(i=i.toLowerCase()),a.hasChildNodes()||"a"==i?"a"==i?(1<t||t<0)&&(a.innerHTML?win.appendChild(make_a(a.innerHTML.trim(),a.href)):win.appendChild(make_a("",a.href))):populate(a,t-1,"h1"==i||"h2"==i?add_class(n,i):n):a.data&&(str=a.data.trim(),str&&""!=str&&win.appendChild(make_p(str,n)))}}function populate_text(e,t){t=void 0!==t?t:"";var n=document.createElement("p");return n.innerHTML=e,""!=t&&(n.className=t),win.appendChild(n),n}function add_prompt(n){if(n=void 0!==n?n:null,""!=context){var e=document.createElement("span"),t=document.createElement("input");t.className="input",t.type="text",t.id="cur-prompt";var o=null;switch(context){case"def":var r=document.createElement("span");r.className="red";var a=getCookie("username");r.innerHTML=""==a?"guest":a.toLowerCase().split(" ").join("_");var i=document.createElement("span");i.innerHTML="@";var s=document.createElement("span");s.className="yellow",s.innerHTML="vivekroy.com ",(p=document.createElement("span")).className="green",p.innerHTML="~",(o=document.createElement("span")).innerHTML=" $",e.appendChild(r),e.appendChild(i),e.appendChild(s),e.appendChild(p),t.onkeypress=function(e){process_input(e,n)};break;case"continue":(p=document.createElement("span")).innerHTML="Do you want to continue? (y/n): ",t.onkeyup=function(e){var t=e.which||e.keyCode;13!=t?(0!=t&&229!=t||(t=(t=e.target.value).charCodeAt(t.length-1)),t=String.fromCharCode(t),e.target.value=t,e.target.disabled=!0,e.target.id="","y"==t||"Y"==t||"n"==t||"N"==t?n(t):(populate_text("Invalid input!"),add_prompt(n))):e.target.value=""},e.appendChild(p);break;case"name":(p=document.createElement("span")).className="blue",p.innerHTML="Enter your name: ",t.onkeypress=function(e){13!=e.keyCode&&13!=e.which||(e.target.disabled=!0,(e.target.id="")!=e.target.value?n(e.target.value):add_prompt(n))},e.appendChild(p);break;default:var p;(p=document.createElement("span")).className="green",p.innerHTML=context,(o=document.createElement("span")).innerHTML=" >",t.onkeypress=function(e){process_input(e,n)},e.appendChild(p)}return input_wrap=document.createElement("span"),input_wrap.className="input-wrap",o&&input_wrap.appendChild(o),input_wrap.appendChild(t),pmt_wrap=document.createElement("div"),pmt_wrap.className="prompt",pmt_wrap.appendChild(e),pmt_wrap.appendChild(input_wrap),"continue"!=context&&"name"!=context&&add_command_suggestion(t),win.appendChild(pmt_wrap),t.focus(),t}}function generate_table(e,t,n){for(var o in t=void 0!==t?t:"blue",n=void 0!==n?n:"str-yellow",table=document.createElement("table"),tbody=document.createElement("tbody"),e)tr=document.createElement("tr"),td1=document.createElement("td"),td2=document.createElement("td"),td1.innerHTML=o,td1.className=t,td2.innerHTML=e[o],td2.className=n,tr.appendChild(td1),tr.appendChild(td2),tbody.appendChild(tr);table.appendChild(tbody),win.appendChild(table)}function handle_input(e){function t(){populate_text("Command not found: "+e),populate_text("Type help for a list of commands")}switch(e=e.toLowerCase()){case"help":generate_table(populate_help());break;case"about":"def"==context?(populate_text("Know about Vivek","h1"),context="about",populate_text("Type help for a list of commands")):t();break;case"blog":"def"==context?populate_text("This feature is not yet available. Sorry for the inconvenience."):t();break;case"contact":"def"==context?populate(document.getElementById("contact"),-1):t();break;case"config":"def"==context?(populate_text("Change configuration","h1"),context="config",populate_text("Type help for a list of commands")):t();break;case"tutorial":"def"==context?run_tutorial():t();break;case"exit":"def"==context?(node=populate_text("Goodbye!","h1"),node.focus(),context=""):context="def";break;case"clear":for(;win.hasChildNodes();)win.removeChild(win.lastChild);break;case"education":"about"==context?generate_table({"<strong>2015-19</strong>":"Bachelor of Computer Science and Engineering <br> Jadavpur University, Kolkata, India <br> CGPA: <strong>8.7</strong>","<strong>2013-15</strong>":"Higher Secondary Education <br> D.A.V Model School, Durgapur, India <br> Percentage marks: <strong>93%</strong>","<strong>2002-13</strong>":"Secondary Education <br> St. Xavier's School, Durgapur, India <br> Percentage marks: <strong>94%</strong>"},"yellow","str-blue"):t();break;case"experience":"about"==context?generate_table({"<strong>Summer 2018</strong>":"Carnegie Mellon University <br> Dr. Martial Hebert <br> Robotics Institute Summer Scholars (RISS) 2018. <br> <strong>Visual Object Tracking using Optical Flow</strong> as input to a CNN.","<strong>Summer 2017</strong>":"Google Summer of Code 2017<br> Haiku Inc. <br> <strong>3D hardware accelerated graphics drivers</strong> for HaikuOS","<strong>Undergraduate <br> development</strong>":"Jadavpur University/DRDO <br> Prof. Chandan Mazumdar <br> <strong>PolComp:</strong> a tool for analysing log records to detect compliance of policies and hence security breaches using Natural Language Processing for The Defence Research and Development Organisation of India (DRDO)","<strong>Undergraduate <br> research</strong>":"Jadavpur University <br> Dr. Sanjoy Kr. Saha <br> <strong>Visual Odometry</strong> using Neural Networks"},"blue","str-yellow"):t();break;case"interests":"about"==context?populate_text("<strong>Fields</strong> <br> Machine Learning <br> Computer Vision <br> Concurrent Programming <br><br><strong>Languages</strong> <br> C++ (Modern C++) <br> Python <br> C <br> Java <br> MATLAB <br> Javascript <br><br><strong>Libraries</strong> <br> Tensorflow <br> Keras <br> OpenCV <br> React.js","str-underline str-red"):t();break;case"cv":if("about"==context)window.open("https://vivekroy.com/CV.pdf").focus();else t();break;case"username":"config"==context?(context="name",add_prompt(function(e){var t=(new Date).getTime();post_user_rename(getCookie("username"),getCookie("userid"),e,t),setCookie("username",e,365),setCookie("userid",t,365),context="config",add_prompt()})):t();break;case"":break;default:t()}}function process_input(e,t){t=void 0!==t?t:null,13!=e.keyCode&&13!=e.which||(e.target.disabled=!0,e.target.id="",handle_input(e.target.value),null!=t?t(e.target.value):"continue"!=context&&"name"!=context&&add_prompt())}function setCookie(e,t,n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var r="expires="+o.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"}function getCookie(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}function post_user_access(e){console.log(e)}function post_user_rename(e,t,n,o){console.log(e+"_"+t+" -> "+n+"_"+o)}function init(t){t=void 0!==t?t:null,populate(text,2);var e=getCookie("username"),n=getCookie("userid");""==e||""==n?(populate_text("<br>Sorry, I did not catch your name"),context="name",add_prompt(function(e){n=(new Date).getTime(),setCookie("username",e,365),setCookie("userid",n,365),greet_user(e,!1),populate_text("---",""),post_user_access(n),populate_text("Type <strong>help</strong> for a list of commands","str-green"),populate_text("Type <strong>tutorial</strong> to run a tutorial on using this website","str-green"),context="def",add_prompt(),null!=t&&t()})):(greet_user(e,!0),populate_text("---",""),populate_text("Type <strong>help</strong> for a list of commands","str-green"),post_user_access(n),add_prompt(),null!=t&&t())}win.onclick=function(e){var t=document.getElementById("cur-prompt");t&&t.focus()};